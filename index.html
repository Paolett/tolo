<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Tolo by genzeb</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/genzeb/tolo">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/genzeb/tolo/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/genzeb/tolo/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Tolo</h1>
          <p>Tolo is an event publish/subscribe framework designed to decouple different parts of your iOS application while still allowing them to communicate efficiently.</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/genzeb">genzeb</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

        <hr><p>To·lo | tō  - lō | <br><em>adverb</em> <br>
Amharic for "hurry up"</p>

<hr><h2>
<a name="introduction" class="anchor" href="#introduction"><span class="octicon octicon-link"></span></a><em>Introduction</em>
</h2>

<p>Tolo is an event publish/subscribe framework inspired by <a href="http://square.github.io/otto/">Otto</a> and designed to decouple different parts of your iOS application while still allowing them to communicate efficiently. Traditional ways of subscribing for and triggering notifications are both cumbersome and error prone with minimal compile time error checking.</p>

<h2>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a><em>Usage</em>
</h2>

<p>Tolo is intended for use as a singleton (though that is not required). The macros utilized in the examples below use the shared instance <code>Tolo.sharedInstance</code>. The use of these macros is optional, but it's highly recommended that you do use them.</p>

<h3>
<a name="publishing" class="anchor" href="#publishing"><span class="octicon octicon-link"></span></a>PUBLISHING</h3>

<p>Event publishing is straightforward using the macro <code>PUBLISH()</code>. This allows you to tell subscribers an action has occurred. An instance of any class may be published as an event and it will only be dispatched to subscribers of that type.</p>

<p>To publish an event, create an instance of the event you wish to publish (for example: <code>EventProgressUpdated</code>) and use the macro <code>PUBLISH()</code>:</p>

<pre><code>PUBLISH(event);
</code></pre>

<p>where event is an instance of the event type (for example: <code>EventProgressUpdated *event = ...</code>).</p>

<h3>
<a name="subscribing" class="anchor" href="#subscribing"><span class="octicon octicon-link"></span></a>SUBSCRIBING</h3>

<p>Subscription is the complement to event publishing — it lets you receive notification that an event has occurred. To subscribe to an event, use the macro <code>SUBSCRIBE()</code> passing in the event type you wish to subscribe to:</p>

<pre><code>SUBSCRIBE(EventProgressUpdated)
{
    // use the variable event — for example: self.progressView.progress = event.progress
}
</code></pre>

<p>In order to receive events, the class instance needs to register with Tolo. To register, simply use the macro <code>REGISTER()</code> and pass in a reference to the subscriber.</p>

<pre><code>REGISTER(self);
</code></pre>

<h3>
<a name="producing" class="anchor" href="#producing"><span class="octicon octicon-link"></span></a>PRODUCING</h3>

<p>When subscribing to events it is often desired to also fetch the current known value for specific events (e.g., current location, active user, etc.). To address this common paradigm, Tolo adds the concept of 'Producers' which provide an immediate callback to any subscribers upon their registration.</p>

<p>To create a producer, use the macro <code>PUBLISHER()</code>:</p>

<pre><code>PUBLISHER(EventProgressUpdated)
{
    return instance-of-EventProgressUpdated;
}
</code></pre>

<p>Producers, like subscribers, must also be registered:</p>

<pre><code>REGISTER(self);
</code></pre>

<p>When registering, the producer method will be called only once for any number of subscribers previously registered for the same event type. However, the producer method will also be called once for each new subscriber that subscribes to an event of the same type.</p>

<p>You may only have one producer per event type registered at a time — if multiple producers are registered, the last producer to register is used.</p>

<h3>
<a name="thread-enforcement" class="anchor" href="#thread-enforcement"><span class="octicon octicon-link"></span></a>THREAD ENFORCEMENT</h3>

<p>Since at times it may be ambiguous on which thread you are receiving callbacks, Tolo provides an enforcement mechanism to ensure you are always called on the main thread. By default, all interaction with an instance is confined to the main thread (this can be changes using the public property Tolo.forceMainThread — YES by default).</p>

<h3>
<a name="what-else" class="anchor" href="#what-else"><span class="octicon octicon-link"></span></a>WHAT ELSE?</h3>

<p>There are a few things to keep in mind. Tolo dispatches all events on the main thread. To disable that (so that events are posted on the publishing thread), set the property <code>forceMainThread</code> to <code>NO</code>: <code>Tolo.sharedInstance.forceMainThread = NO</code> (or replace <code>Tolo.sharedInstance</code> with your instance of Tolo). </p>

<p>You are strongly encouraged to use the macros. However, keep in mind that: 1) the macros use the default Tolo instance, b) if the subscriber/publisher prefixes are modified (these are <code>publisherPrefix</code> and <code>subscriberPrfix</code>), you can not use the <code>SUBSCRIBE()</code> and <code>PUBLISHER()</code> macros — <strong>all other macros work fine</strong>!</p>

<p>As I said above, the use of macros is optional. For instance, subscribing becomes: <code>[&lt;Tolo instance&gt; subscribe:&lt;subscriber instance, eg. self&gt;]</code> or posting simply becomes <code>[&lt;Tolo instance&gt; publish:&lt;event instance&gt;]</code>.</p>

<p>Last but not least, unsubscribing. You may explicitly unsubscribe from Tolo using the <code>UNREGISTER()</code> macro (or [ unregister:]). However, this is optional, and thanks to the magic of ARC, Tolo will auto-unregister upon subscriber getting dealloced. </p>

<h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a><em>Installation</em>
</h2>

<p>There are two easy ways of installing Tolo:</p>

<ol>
<li>Drag-and-drop the files Tolo.h and Tolo.m into your project and import Tolo.h as needed, or</li>
<li>Drag-and-drop the project file, Tolo.xcodeproj, into your project and add it as Target Dependencies and Link Binary With Libraries in your project's Build Phases setting</li>
</ol><h4>
<a name="hellowtolo" class="anchor" href="#hellowtolo"><span class="octicon octicon-link"></span></a>HELLOWTOLO</h4>

<p>A sample application using Tolo is also <a href="https://github.com/genzeb/tolo/tree/master/HelloTolo">included</a>. The application is self explanatory. You can run the application and play around with it by adding as many subscribers (to a randomly generated event at 1Hz) as you like interactively. The text field also generates an event with each keystroke (a subscriber writes out what you are typing on the label below).</p>

<h4>
<a name="questions" class="anchor" href="#questions"><span class="octicon octicon-link"></span></a><em>Questions</em>?</h4>

<p>Feel free to contact me, Ephraim Tekle (<a href="https://github.com/genzeb" class="user-mention">@genzeb</a>), if you need additional help integrating Tolo into your project.</p>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>